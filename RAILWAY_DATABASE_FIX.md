# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "no such table" –Ω–∞ Railway

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Railway –ø–æ—è–≤–ª—è—é—Ç—Å—è –æ—à–∏–±–∫–∏:
```
SqliteError: no such table: users
SqliteError: no such table: orders
SqliteError: no such table: mockups
```

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í production —Ä–µ–∂–∏–º–µ TypeORM –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–æ—Ç–∫–ª—é—á–∞–µ—Ç** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü (`synchronize: false`).

–°–º–æ—Ç—Ä–∏—Ç–µ `src/config/database.config.ts`:
```typescript
synchronize: process.env.DB_SYNC === 'true' || process.env.NODE_ENV !== 'production',
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é DB_SYNC (–ë—ã—Å—Ç—Ä–æ–µ)

### –®–∞–≥–∏:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://railway.app
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç `printcore-backend`

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Variables**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Variables"**

3. **–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é**
   ```
   –ò–º—è: DB_SYNC
   –ó–Ω–∞—á–µ–Ω–∏–µ: true
   ```

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ**
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç redeploy
   - –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments** ‚Üí **View Logs**
   - –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —É—Å–ø–µ—à–Ω—ã–π —Å—Ç–∞—Ä—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ "no such table"

### ‚ö†Ô∏è –í–∞–∂–Ω–æ:

- `DB_SYNC=true` –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è SQLite –≤ production
- TypeORM –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã –Ω–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã (–µ—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–µ –ø–æ–º–µ–Ω—è–ª–∞—Å—å)

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ!

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**: `src/scripts/init-database.ts`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–∞
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ

2. **package.json** –æ–±–Ω–æ–≤–ª–µ–Ω:
   ```json
   "start:prod": "nest build && node dist/src/scripts/init-database.js && node dist/src/main.js"
   ```

3. **–ù–∏—á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!**
   - –ü—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ push –≤ GitHub
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - –¢–∞–±–ª–∏—Ü—ã –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞:

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ –ª–æ–≥–∞—Ö Railway –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
üìÅ –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: /app/data/printcore.db
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
üìä –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã.
```

–ê –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```
üöÄ Server is running on: http://[::]:3001
üìö Swagger docs: http://[::]:3001/api/docs
```

---

## üîÑ –ï—Å–ª–∏ —É–∂–µ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π redeploy

1. Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. **Settings** ‚Üí **Redeploy**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –õ–æ–∫–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ push

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –ª–æ–∫–∞–ª—å–Ω–æ –∏ –∑–∞–ª–∏—Ç—å –Ω–∞ Railway:

```bash
cd dev/printcore-backend

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ production –ø—É—Ç—å
export DB_FILE=/app/data/printcore.db

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
npm run init:db

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞
ls -lh /app/data/printcore.db
```

**–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ volume –≤ Railway, —á—Ç–æ –æ–±—ã—á–Ω–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–µ—à–µ–Ω–∏–µ 1 –∏–ª–∏ 2.

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway

–ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ `SqliteError: no such table`.

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API —á–µ—Ä–µ–∑ Swagger

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://–≤–∞—à-railway-url.up.railway.app/api/docs
```

### 3. –¢–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
curl -X POST https://–≤–∞—à-railway-url.up.railway.app/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@printcore.by",
    "password": "test123",
    "name": "Test User",
    "phone": "+375291234567"
  }'
```

–î–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å:
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": 1,
    "email": "test@printcore.by",
    "name": "Test User"
  }
}
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–∞–∑–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. Railway Dashboard ‚Üí **Redeploy**
3. –ü–æ—Å–ª–µ redeploy –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏
4. ‚úÖ –ï—Å–ª–∏ –≤—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω - persistent storage —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üìã Checklist

- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DB_SYNC=true` –≤ Railway (–†–µ—à–µ–Ω–∏–µ 1)
  –ò–õ–ò
- [ ] –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –¥–µ–ø–ª–æ–µ (–†–µ—à–µ–Ω–∏–µ 2)
- [ ] Redeploy –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –æ—à–∏–±–æ–∫ "no such table"
- [ ] Swagger –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] API –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ redeploy

---

## üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–í Railway Variables –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
```env
DB_FILE=/app/data/printcore.db
DB_SYNC=true
JWT_SECRET=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á
JWT_EXPIRES_IN=7d
PORT=3001
NODE_ENV=production
FRONTEND_URL=https://printcore.by
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Volume:

1. Railway Dashboard ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí **Data** –∏–ª–∏ **Volumes**
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ volume `printcore-data` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
3. Mount Path –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `/app/data`

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ railway.toml:

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```toml
[[volumes]]
name = "printcore-data"
mountPath = "/app/data"
```

### –ü–æ—Å–ª–µ–¥–Ω—è—è –Ω–∞–¥–µ–∂–¥–∞ - –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å volume:

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!

1. Railway Dashboard ‚Üí **Volumes** ‚Üí —É–¥–∞–ª–∏—Ç–µ `printcore-data`
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π volume —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. **Redeploy**

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª–Ω—ã–µ –ª–æ–≥–∏ –≤ Railway
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ build –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`better-sqlite3`, `typeorm`)
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–¥–∞–ª–∏—Ç—å `node_modules` –≤ Railway (—á–µ—Ä–µ–∑ Redeploy)

---

**–ì–æ—Ç–æ–≤–æ! –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å! ‚úÖ**

¬© 2025 PrintCore












